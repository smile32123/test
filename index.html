<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCL-90 ç—‡çŠ¶è‡ªè¯„é‡è¡¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Microsoft YaHei", sans-serif; 
            background: linear-gradient(135deg, #F8F6F2 0%, #EDEAE4 100%); 
            min-height: 100vh; 
            padding: 15px; 
            color: #3C3C3C;
        }
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            background: rgba(255, 255, 255, 0.95); 
            border-radius: 15px; 
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08); 
            overflow: hidden; 
            backdrop-filter: blur(10px);
        }
        .header { 
            background: linear-gradient(135deg, #8B7355 0%, #6B5B3D 100%); 
            color: white; 
            padding: 25px 20px; 
            text-align: center; 
        }
        .header h1 { 
            font-size: 28px; 
            margin-bottom: 10px; 
            font-weight: 500;
        }
        .header p { 
            font-size: 14px; 
            opacity: 0.9; 
        }
        
        /* ç§»åŠ¨ç«¯å•é¢˜æ¨¡å¼ */
        .mobile-test-area {
            display: none;
            padding: 20px;
            min-height: 60vh;
            position: relative;
        }
        
        .question-container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .question-number {
            background: #8B7355;
            color: white;
            width: 36px;
            height: 36px;
            line-height: 36px;
            text-align: center;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
        }
        
        .progress-text {
            font-size: 14px;
            color: #666;
        }
        
        .question-text {
            font-size: 18px;
            font-weight: 500;
            line-height: 1.5;
            margin-bottom: 25px;
            color: #333;
        }
        
        .mobile-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .mobile-option {
            display: flex;
            align-items: center;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .mobile-option:hover {
            background: #e9ecef;
        }
        
        .mobile-option.selected {
            background: #e8f0fe;
            border-color: #8B7355;
        }
        
        .mobile-option input {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .mobile-option span {
            font-size: 16px;
            font-weight: 500;
        }
        
        .mobile-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .nav-btn {
            background: #8B7355;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(139, 115, 85, 0.3);
        }
        
        .nav-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        .nav-btn:hover:not(:disabled) {
            background: #6B5B3D;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 115, 85, 0.4);
        }
        
        .progress-container {
            margin: 20px 0;
            background: #f0f0f0;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #8B7355, #6B5B3D);
            width: 0%;
            transition: width 0.4s ease;
        }
        
        /* PCç«¯æ ·å¼ä¿æŒä¸å˜ */
        .instruction { 
            background: #f8f9fa; 
            padding: 20px; 
            border-left: 4px solid #8B7355; 
            margin: 20px; 
            border-radius: 5px; 
        }
        .instruction h3 { 
            color: #3C3C3C; 
            margin-bottom: 10px; 
            font-weight: 500;
        }
        .instruction p { 
            color: #666; 
            line-height: 1.6; 
            margin-bottom: 8px; 
        }
        .rating-guide { 
            display: flex; 
            justify-content: space-around; 
            flex-wrap: wrap; 
            margin-top: 15px; 
            gap: 10px; 
        }
        .rating-item { 
            background: white; 
            padding: 8px 15px; 
            border-radius: 20px; 
            font-size: 13px; 
            color: #8B7355; 
            font-weight: bold; 
            border: 1px solid #e0e0e0;
        }
        .desktop-test-area { 
            padding: 15px 20px; 
        }
        .question { 
            background: #f8f9fa; 
            padding: 15px; 
            margin-bottom: 15px; 
            border-radius: 8px; 
            transition: all 0.3s; 
            border-left: 3px solid transparent;
        }
        .question:hover { 
            background: #f0f2f5; 
            transform: translateX(3px); 
            border-left: 3px solid #8B7355;
        }
        .question-text { 
            font-weight: 500; 
            color: #3C3C3C; 
            margin-bottom: 10px; 
            font-size: 15px; 
        }
        .desktop-question-number { 
            display: inline-block; 
            background: #8B7355; 
            color: white; 
            width: 30px; 
            height: 30px; 
            line-height: 30px; 
            text-align: center; 
            border-radius: 50%; 
            margin-right: 10px; 
            font-size: 14px; 
        }
        .desktop-options { 
            display: flex; 
            gap: 10px; 
            flex-wrap: wrap; 
            margin-left: 0; 
        }
        .desktop-option-label { 
            display: flex; 
            align-items: center; 
            cursor: pointer; 
            padding: 8px 12px; 
            border-radius: 5px; 
            transition: all 0.3s; 
            background: white; 
            border: 1px solid #e0e0e0;
            flex: 1;
            min-width: 120px;
            justify-content: center;
        }
        .desktop-option-label:hover { 
            background: #8B7355; 
            color: white; 
            border-color: #8B7355;
        }
        .desktop-option-label input[type="radio"] { 
            margin-right: 5px; 
            cursor: pointer; 
        }
        .submit-area { 
            padding: 25px 20px; 
            text-align: center; 
        }
        .btn { 
            background: linear-gradient(135deg, #8B7355 0%, #6B5B3D 100%); 
            color: white; 
            border: none; 
            padding: 14px 35px; 
            font-size: 16px; 
            border-radius: 25px; 
            cursor: pointer; 
            transition: all 0.3s; 
            box-shadow: 0 4px 15px rgba(139, 115, 85, 0.3); 
            font-weight: 500;
            width: 100%;
            max-width: 300px;
        }
        .btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 6px 20px rgba(139, 115, 85, 0.4); 
        }
        .btn:active { 
            transform: translateY(0); 
        }
        .btn:disabled { 
            background: #cccccc; 
            cursor: not-allowed; 
            transform: none; 
            box-shadow: none; 
        }
        .result-area { 
            display: none; 
            padding: 20px; 
            background: #f8f9fa; 
        }
        .result-area.show { 
            display: block; 
        }
        .error-message { 
            background: #f44336; 
            color: white; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 20px; 
            display: none; 
            text-align: center; 
        }
        .error-message.show { 
            display: block; 
        }
        .completed-notice { 
            background: #f8f9fa; 
            padding: 20px; 
            border-left: 4px solid #28a745; 
            margin: 20px; 
            border-radius: 5px; 
            text-align: center; 
        }
        .completed-notice h3 { 
            color: #28a745; 
            margin-bottom: 10px; 
            font-weight: 500;
        }
        .completed-notice p { 
            color: #666; 
            line-height: 1.6; 
            margin-bottom: 8px; 
        }
        
        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            .desktop-test-area, .instruction {
                display: none;
            }
            
            .mobile-test-area {
                display: block;
            }
            
            .header {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 22px;
            }
            
            .question-container {
                padding: 20px;
            }
            
            .question-text {
                font-size: 17px;
            }
        }
        
        /* PCç«¯æ ·å¼ */
        @media (min-width: 769px) {
            .mobile-test-area {
                display: none;
            }
            
            .desktop-test-area, .instruction {
                display: block;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SCL-90 ç—‡çŠ¶è‡ªè¯„é‡è¡¨</h1>
            <p>Symptom Checklist 90</p>
        </div>
        
        <div class="completed-notice" id="completedNotice" style="display: none;">
            <h3>âœ… æ‚¨å·²å®Œæˆæµ‹è¯•</h3>
            <p>æ‚¨å·²ç»å®Œæˆäº†æœ¬æ¬¡SCL-90æµ‹è¯•ï¼Œä»¥ä¸‹æ˜¯æ‚¨çš„æµ‹è¯•ç»“æœã€‚å¦‚éœ€é‡æ–°æµ‹è¯•ï¼Œè¯·ç‚¹å‡»ä¸‹æ–¹çš„"é‡æ–°æµ‹è¯•"æŒ‰é’®ã€‚</p>
        </div>
        
        <div class="instruction" id="instruction">
            <h3>ğŸ“‹ å¡«å†™è¯´æ˜</h3>
            <p>ä¸‹é¢åˆ—å‡ºäº†æœ‰äº›äººå¯èƒ½æœ‰çš„ç—…ç—›æˆ–é—®é¢˜ï¼Œè¯·ä»”ç»†é˜…è¯»æ¯ä¸€æ¡ï¼Œç„¶åæ ¹æ®<strong>æœ€è¿‘ä¸€æ˜ŸæœŸ</strong>ä»¥æ¥ï¼ˆåŒ…æ‹¬ä»Šå¤©ï¼‰æ‚¨çš„å®é™…æ„Ÿè§‰ï¼Œé€‰æ‹©æœ€ç¬¦åˆçš„ç­”æ¡ˆã€‚</p>
            <p><strong>è¯„åˆ†æ ‡å‡†ï¼š</strong></p>
            <div class="rating-guide">
                <span class="rating-item">1 - æ²¡æœ‰</span>
                <span class="rating-item">2 - å¾ˆè½»</span>
                <span class="rating-item">3 - ä¸­ç­‰</span>
                <span class="rating-item">4 - åé‡</span>
                <span class="rating-item">5 - ä¸¥é‡</span>
            </div>
        </div>
        
        <div class="error-message" id="errorMessage">è¯·å®Œæˆæ‰€æœ‰é¢˜ç›®åå†æäº¤ï¼</div>
        
        <!-- PCç«¯æµ‹è¯•åŒºåŸŸ -->
        <form id="scl90Form">
            <div class="desktop-test-area" id="desktopTestArea"></div>
            <div class="submit-area"><button type="submit" class="btn" id="submitBtn">æäº¤æµ‹è¯•</button></div>
        </form>
        
        <!-- ç§»åŠ¨ç«¯æµ‹è¯•åŒºåŸŸ -->
        <div class="mobile-test-area" id="mobileTestArea">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="question-container" id="mobileQuestionContainer">
                <!-- ç§»åŠ¨ç«¯é¢˜ç›®ä¼šåŠ¨æ€æ’å…¥åˆ°è¿™é‡Œ -->
            </div>
            <div class="mobile-nav">
                <button class="nav-btn" id="prevBtn" disabled>ä¸Šä¸€é¢˜</button>
                <button class="nav-btn" id="nextBtn">ä¸‹ä¸€é¢˜</button>
            </div>
        </div>
        
        <!-- ç»“æœåŒºåŸŸ -->
        <div class="result-area" id="resultArea">
            <div class="result-summary">
                <h2>ğŸ“Š æµ‹è¯•ç»“æœæ€»è§ˆ</h2>
                <div class="summary-grid" id="summaryGrid"></div>
            </div>
            <div class="factor-table">
                <h3>ğŸ“ˆ å„å› å­å¾—åˆ†è¯¦æƒ…</h3>
                <table>
                    <thead>
                        <tr>
                            <th>å› å­åç§°</th>
                            <th>å› å­åˆ†</th>
                            <th>å› å­å‡åˆ†</th>
                            <th>ç¨‹åº¦è¯„ä»·</th>
                        </tr>
                    </thead>
                    <tbody id="factorTableBody"></tbody>
                </table>
            </div>
            <div class="chart-container">
                <h3>ğŸ¯ å› å­å¾—åˆ†é›·è¾¾å›¾</h3>
                <canvas id="radarChart" width="500" height="500"></canvas>
            </div>
            <div class="factor-analysis">
                <h3>ğŸ“‹ å„å› å­è¯¦ç»†åˆ†æ</h3>
                <div id="factorAnalysisText"></div>
            </div>
            <div class="interpretation">
                <h3>ğŸ’¡ æ€»ä½“è¯„ä»·</h3>
                <div id="interpretationText"></div>
            </div>
            <div class="submit-area">
                <button class="btn" onclick="resetTest()">é‡æ–°æµ‹è¯•</button>
            </div>
        </div>
    </div>

    <script>
        // é¢˜ç›®æ•°æ®
        const questions = ["å¤´ç—›","ç¥ç»è¿‡æ•ï¼Œå¿ƒä¸­ä¸è¸å®","å¤´è„‘ä¸­æœ‰ä¸å¿…è¦çš„æƒ³æ³•æˆ–å­—å¥ç›˜æ—‹","å¤´æ˜æˆ–æ˜å€’","å¯¹å¼‚æ€§çš„å…´è¶£å‡é€€","å¯¹æ—äººè´£å¤‡æ±‚å…¨","æ„Ÿåˆ°åˆ«äººèƒ½æ§åˆ¶æ‚¨çš„æ€æƒ³","è´£æ€ªåˆ«äººåˆ¶é€ éº»çƒ¦","å¿˜æ€§å¤§","æ‹…å¿ƒè‡ªå·±çš„è¡£é¥°æ•´é½åŠä»ªæ€çš„ç«¯æ­£","å®¹æ˜“çƒ¦æ¼å’Œæ¿€åŠ¨","èƒ¸ç—›","å®³æ€•ç©ºæ—·çš„åœºæ‰€æˆ–è¡—é“","æ„Ÿåˆ°è‡ªå·±çš„ç²¾åŠ›ä¸‹é™ï¼Œæ´»åŠ¨å‡æ…¢","æƒ³ç»“æŸè‡ªå·±çš„ç”Ÿå‘½","å¬åˆ°æ—äººå¬ä¸åˆ°çš„å£°éŸ³","å‘æŠ–","æ„Ÿåˆ°å¤§å¤šæ•°äººéƒ½ä¸å¯ä¿¡ä»»","èƒƒå£ä¸å¥½","å®¹æ˜“å“­æ³£","åŒå¼‚æ€§ç›¸å¤„æ—¶æ„Ÿåˆ°å®³ç¾ä¸è‡ªåœ¨","æ„Ÿåˆ°å—éª—ï¼Œä¸­äº†åœˆå¥—æˆ–æœ‰äººæƒ³æŠ“æ‚¨","æ— ç¼˜æ— æ•…åœ°çªç„¶æ„Ÿåˆ°å®³æ€•","è‡ªå·±ä¸èƒ½æ§åˆ¶åœ°å¤§å‘è„¾æ°”","æ€•å•ç‹¬å‡ºé—¨","ç»å¸¸è´£æ€ªè‡ªå·±","è…°ç—›","æ„Ÿåˆ°éš¾ä»¥å®Œæˆä»»åŠ¡","æ„Ÿåˆ°å­¤ç‹¬","æ„Ÿåˆ°è‹¦é—·","è¿‡åˆ†æ‹…å¿§","å¯¹äº‹ç‰©ä¸æ„Ÿå…´è¶£","æ„Ÿåˆ°å®³æ€•","æ‚¨çš„æ„Ÿæƒ…å®¹æ˜“å—åˆ°ä¼¤å®³","æ—äººèƒ½çŸ¥é“æ‚¨çš„ç§ä¸‹æƒ³æ³•","æ„Ÿåˆ°åˆ«äººä¸ç†è§£æ‚¨ã€ä¸åŒæƒ…æ‚¨","æ„Ÿåˆ°äººä»¬å¯¹æ‚¨ä¸å‹å¥½ï¼Œä¸å–œæ¬¢æ‚¨","åšäº‹å¿…é¡»åšå¾—å¾ˆæ…¢ä»¥ä¿è¯åšå¾—æ­£ç¡®","å¿ƒè·³å¾—å¾ˆå‰å®³","æ¶å¿ƒæˆ–èƒƒéƒ¨ä¸èˆ’æœ","æ„Ÿåˆ°æ¯”ä¸ä¸Šä»–äºº","è‚Œè‚‰é…¸ç—›","æ„Ÿåˆ°æœ‰äººåœ¨ç›‘è§†æ‚¨ã€è°ˆè®ºæ‚¨","éš¾ä»¥å…¥ç¡","åšäº‹å¿…é¡»åå¤æ£€æŸ¥","éš¾ä»¥åšå‡ºå†³å®š","æ€•ä¹˜ç”µè½¦ã€å…¬å…±æ±½è½¦ã€åœ°é“æˆ–ç«è½¦","å‘¼å¸æœ‰å›°éš¾","ä¸€é˜µé˜µå‘å†·æˆ–å‘çƒ­","å› ä¸ºæ„Ÿåˆ°å®³æ€•è€Œé¿å¼€æŸäº›ä¸œè¥¿ã€åœºåˆæˆ–æ´»åŠ¨","è„‘å­å˜ç©ºäº†","èº«ä½“å‘éº»æˆ–åˆºç—›","å–‰å’™æœ‰æ¢—å¡æ„Ÿ","æ„Ÿåˆ°å‰é€”æ²¡æœ‰å¸Œæœ›","ä¸èƒ½é›†ä¸­æ³¨æ„åŠ›","èº«ä½“çš„æŸä¸€éƒ¨åˆ†æ„Ÿåˆ°è™šå¼±","æ„Ÿåˆ°ç´§å¼ æˆ–å®¹æ˜“ç´§å¼ ","æ„Ÿåˆ°æ‰‹æˆ–è„šå‘é‡","æƒ³åˆ°æœ‰å…³æ­»äº¡çš„äº‹","åƒå¾—å¤ªå¤š","å½“åˆ«äººçœ‹ç€æ‚¨æˆ–è°ˆè®ºæ‚¨æ—¶æ„Ÿåˆ°ä¸è‡ªåœ¨","æœ‰ä¸€äº›ä¸å±äºæ‚¨è‡ªå·±çš„æƒ³æ³•","æœ‰æƒ³æ‰“äººæˆ–ä¼¤å®³ä»–äººçš„å†²åŠ¨","é†’å¾—å¤ªæ—©","å¿…é¡»åå¤æ´—æ‰‹ã€ç‚¹æ•°ç›®æˆ–è§¦æ‘¸æŸäº›ä¸œè¥¿","ç¡å¾—ä¸ç¨³ä¸æ·±","æœ‰æƒ³æ‘”åæˆ–ç ´åä¸œè¥¿çš„æƒ³æ³•","æœ‰ä¸€äº›åˆ«äººæ²¡æœ‰çš„æƒ³æ³•æˆ–å¿µå¤´","æ„Ÿåˆ°å¯¹åˆ«äººç¥ç»è¿‡æ•","åœ¨å•†åº—æˆ–ç”µå½±é™¢ç­‰äººå¤šçš„åœ°æ–¹æ„Ÿåˆ°ä¸è‡ªåœ¨","æ„Ÿåˆ°ä»»ä½•äº‹æƒ…éƒ½å¾ˆå›°éš¾","ä¸€é˜µé˜µææƒ§æˆ–æƒŠæ","æ„Ÿåˆ°åœ¨å…¬å…±åœºåˆåƒä¸œè¥¿å¾ˆä¸èˆ’æœ","ç»å¸¸ä¸äººäº‰è®º","å•ç‹¬ä¸€äººæ—¶ç¥ç»å¾ˆç´§å¼ ","åˆ«äººå¯¹æ‚¨çš„æˆç»©æ²¡æœ‰åšå‡ºæ°å½“çš„è¯„ä»·","å³ä½¿å’Œåˆ«äººåœ¨ä¸€èµ·ä¹Ÿæ„Ÿåˆ°å­¤å•","æ„Ÿåˆ°åç«‹ä¸å®‰å¿ƒç¥ä¸å®š","æ„Ÿåˆ°è‡ªå·±æ²¡æœ‰ä»€ä¹ˆä»·å€¼","æ„Ÿåˆ°ç†Ÿæ‚‰çš„ä¸œè¥¿å˜æˆé™Œç”Ÿæˆ–ä¸åƒæ˜¯çœŸçš„","å¤§å«æˆ–æ‘”ä¸œè¥¿","å®³æ€•ä¼šåœ¨å…¬å…±åœºåˆæ˜å€’","æ„Ÿåˆ°åˆ«äººæƒ³å æ‚¨çš„ä¾¿å®œ","ä¸ºä¸€äº›æœ‰å…³æ€§çš„æƒ³æ³•è€Œå¾ˆè‹¦æ¼","æ‚¨è®¤ä¸ºåº”è¯¥å› ä¸ºè‡ªå·±çš„è¿‡é”™è€Œå—åˆ°æƒ©ç½š","æ„Ÿåˆ°è¦èµ¶å¿«æŠŠäº‹æƒ…åšå®Œ","æ„Ÿåˆ°è‡ªå·±çš„èº«ä½“æœ‰ä¸¥é‡é—®é¢˜","ä»æœªæ„Ÿåˆ°å’Œå…¶ä»–äººå¾ˆäº²è¿‘","æ„Ÿåˆ°è‡ªå·±æœ‰ç½ª","æ„Ÿåˆ°è‡ªå·±çš„è„‘å­æœ‰æ¯›ç—…"];
        
        const factors = {
            'èº¯ä½“åŒ–':[0,3,11,26,39,41,47,48,51,52,55,57],
            'å¼ºè¿«ç—‡çŠ¶':[2,8,9,27,37,44,45,50,54,64],
            'äººé™…å…³ç³»æ•æ„Ÿ':[5,20,33,35,36,40,60,68,72],
            'æŠ‘éƒ':[4,13,14,19,21,25,28,29,30,31,53,70,78],
            'ç„¦è™‘':[1,16,22,32,38,56,71,77,79,85],
            'æ•Œå¯¹':[10,23,62,66,73,80],
            'ææ€–':[12,24,46,49,69,74,81],
            'åæ‰§':[7,17,42,67,75,82],
            'ç²¾ç¥ç—…æ€§':[6,15,34,61,76,83,84,86,87,89]
        };
        
        const factorInfo = {
            'èº¯ä½“åŒ–':{desc:'åæ˜ ä¸»è§‚æ„Ÿå—åˆ°çš„èº«ä½“ä¸é€‚',normal:'èº¯ä½“åŒ–ç—‡çŠ¶åœ¨æ­£å¸¸èŒƒå›´å†…',mild:'å¯èƒ½å¶å°”æ„Ÿåˆ°èº«ä½“ä¸é€‚ã€‚å»ºè®®ä¿æŒè§„å¾‹ä½œæ¯ã€é€‚åº¦è¿åŠ¨ã€å­¦ä¹ æ”¾æ¾æŠ€å·§',moderate:'è¾ƒé¢‘ç¹æ„Ÿå—èº«ä½“ä¸é€‚ã€‚å»ºè®®åŠæ—¶å°±åŒ»æ’æŸ¥å™¨è´¨æ€§ç–¾ç—…ã€å­¦ä¹ å‹åŠ›ç®¡ç†ã€è€ƒè™‘å¿ƒç†å’¨è¯¢',severe:'å­˜åœ¨è¾ƒä¸¥é‡èº¯ä½“åŒ–ç—‡çŠ¶ã€‚å»ºè®®ç«‹å³å°±åŒ»ä½“æ£€ã€å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢ã€å¯èƒ½éœ€è¦è¯ç‰©è¾…åŠ©æ²»ç–—'},
            'å¼ºè¿«ç—‡çŠ¶':{desc:'åæ˜ å¼ºè¿«æ€§æ€ç»´å’Œè¡Œä¸º',normal:'æ²¡æœ‰æ˜æ˜¾å¼ºè¿«ç—‡çŠ¶',mild:'å¶å°”æœ‰é‡å¤æ€§æƒ³æ³•æˆ–è¡Œä¸ºã€‚å»ºè®®ä¸è¦è¿‡åˆ†å…³æ³¨ã€åŸ¹å…»å…´è¶£çˆ±å¥½ã€ä¿æŒç”Ÿæ´»çµæ´»æ€§',moderate:'å­˜åœ¨ä¸€å®šå¼ºè¿«æ€ç»´æˆ–è¡Œä¸ºã€‚å»ºè®®å¯»æ±‚å¿ƒç†å’¨è¯¢ã€å­¦ä¹ è®¤çŸ¥è¡Œä¸ºç–—æ³•ã€è®°å½•è§¦å‘å› ç´ ',severe:'å¼ºè¿«ç—‡çŠ¶è¾ƒä¸¥é‡ã€‚å»ºè®®å°½å¿«å¯»æ±‚ç²¾ç¥ç§‘åŒ»ç”Ÿå¸®åŠ©ã€å¯èƒ½éœ€è¦è¯ç‰©é…åˆå¿ƒç†æ²»ç–—'},
            'äººé™…å…³ç³»æ•æ„Ÿ':{desc:'åæ˜ äººé™…äº¤å¾€ä¸­çš„ä¸è‡ªåœ¨æ„Ÿ',normal:'äººé™…äº¤å¾€æ„Ÿåˆ°è‡ªåœ¨',mild:'æŸäº›ç¤¾äº¤åœºåˆç•¥æ„Ÿä¸é€‚ã€‚å»ºè®®å¤šå‚ä¸ç¤¾äº¤æ´»åŠ¨ã€åŸ¹å…»è‡ªä¿¡å¿ƒã€å­¦ä¹ ç¤¾äº¤æŠ€å·§',moderate:'äººé™…äº¤å¾€è¾ƒä¸ºæ•æ„Ÿã€‚å»ºè®®å‚åŠ ç¤¾äº¤æŠ€èƒ½è®­ç»ƒã€å¯»æ±‚å¿ƒç†å’¨è¯¢ã€ä»å°èŒƒå›´ç¤¾äº¤å¼€å§‹',severe:'äººé™…å…³ç³»éå¸¸æ•æ„Ÿã€‚å»ºè®®åŠæ—¶å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢ã€å¯èƒ½éœ€è¦ç³»ç»Ÿå¿ƒç†æ²»ç–—'},
            'æŠ‘éƒ':{desc:'åæ˜ æƒ…ç»ªä½è½ã€å…´è¶£å‡é€€ç­‰',normal:'æƒ…ç»ªçŠ¶æ€è‰¯å¥½',mild:'å¶å°”æƒ…ç»ªä½è½ã€‚å»ºè®®ä¿æŒè§„å¾‹ä½œæ¯ã€åšæŒè¿åŠ¨ã€åŸ¹å…»å…´è¶£çˆ±å¥½ã€å¤šä¸äººäº¤æµ',moderate:'å­˜åœ¨è¾ƒæ˜æ˜¾æŠ‘éƒæƒ…ç»ªã€‚å»ºè®®å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢ã€è§„å¾‹è¿åŠ¨ã€ä¿æŒç¤¾äº¤ã€å¿…è¦æ—¶è€ƒè™‘è¯ç‰©æ²»ç–—',severe:'å¯èƒ½å­˜åœ¨ä¸¥é‡æŠ‘éƒç—‡çŠ¶ã€‚å»ºè®®ç«‹å³å¯»æ±‚ç²¾ç¥ç§‘åŒ»ç”Ÿå¸®åŠ©ã€å¯èƒ½éœ€è¦æŠ—æŠ‘éƒè¯ç‰©ã€å®šæœŸå¿ƒç†å’¨è¯¢ã€‚å¦‚æœ‰è‡ªæ€æƒ³æ³•è¯·ç«‹å³æ‹¨æ‰“å±æœºå¹²é¢„çƒ­çº¿'},
            'ç„¦è™‘':{desc:'åæ˜ ç„¦è™‘ã€ç´§å¼ ç­‰æƒ…ç»ª',normal:'ç„¦è™‘æ°´å¹³æ­£å¸¸',mild:'æŸäº›æƒ…å†µæ„Ÿåˆ°ç„¦è™‘ã€‚å»ºè®®å­¦ä¹ æ·±å‘¼å¸æ”¾æ¾æŠ€å·§ã€è§„å¾‹è¿åŠ¨ã€ä¿è¯å……è¶³ç¡çœ ',moderate:'å­˜åœ¨è¾ƒæ˜æ˜¾ç„¦è™‘ç—‡çŠ¶ã€‚å»ºè®®å¯»æ±‚å¿ƒç†å’¨è¯¢ã€å­¦ä¹ ç„¦è™‘ç®¡ç†ã€ç»ƒä¹ æ­£å¿µå†¥æƒ³',severe:'ç„¦è™‘ç—‡çŠ¶ä¸¥é‡ã€‚å»ºè®®ç«‹å³å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€å¯èƒ½éœ€è¦æŠ—ç„¦è™‘è¯ç‰©ã€ç³»ç»Ÿå¿ƒç†æ²»ç–—'},
            'æ•Œå¯¹':{desc:'åæ˜ æ„¤æ€’ã€æ”»å‡»æ€§ç­‰',normal:'èƒ½å¤Ÿè¾ƒå¥½æ§åˆ¶æƒ…ç»ª',mild:'å¶å°”æ„¤æ€’æˆ–çƒ¦èºã€‚å»ºè®®å­¦ä¹ æƒ…ç»ªç®¡ç†ã€æ‰¾åˆ°å¥åº·å®£æ³„æ–¹å¼ã€å¤šè¿åŠ¨',moderate:'è¾ƒæ˜“äº§ç”Ÿæ„¤æ€’æƒ…ç»ªã€‚å»ºè®®å¯»æ±‚å¿ƒç†å’¨è¯¢ã€å­¦ä¹ æ„¤æ€’ç®¡ç†ã€è¯†åˆ«è§¦å‘å› ç´ ',severe:'æ•Œå¯¹æƒ…ç»ªè¾ƒå¼ºã€‚å»ºè®®åŠæ—¶å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€å¯èƒ½éœ€è¦å¿ƒç†æ²»ç–—ã€‚å¦‚æœ‰æš´åŠ›å€¾å‘è¯·ç«‹å³å°±åŒ»'},
            'ææ€–':{desc:'åæ˜ å¯¹ç‰¹å®šåœºæ‰€çš„ææƒ§',normal:'æ²¡æœ‰æ˜æ˜¾ææƒ§ç—‡çŠ¶',mild:'å¯¹æŸäº›åœºæ™¯ç•¥æ„Ÿä¸é€‚ã€‚å»ºè®®é€æ­¥æš´éœ²ã€å­¦ä¹ æ”¾æ¾æŠ€å·§ã€ä¸è¦è¿‡åº¦å›é¿',moderate:'å­˜åœ¨ä¸€å®šææƒ§ç—‡çŠ¶ã€‚å»ºè®®å¯»æ±‚å¿ƒç†å’¨è¯¢ã€ç³»ç»Ÿè„±æ•ç–—æ³•ã€é€æ­¥é¢å¯¹ææƒ§',severe:'ææƒ§ç—‡çŠ¶æ˜æ˜¾ã€‚å»ºè®®ç«‹å³å¯»æ±‚å¸®åŠ©ã€è®¤çŸ¥è¡Œä¸ºç–—æ³•æœ‰æ•ˆã€å¯èƒ½éœ€è¦è¯ç‰©è¾…åŠ©'},
            'åæ‰§':{desc:'åæ˜ çŒœç–‘ã€è¢«å®³æ€æƒ³ç­‰',normal:'æ€ç»´æ­£å¸¸',mild:'å¶å°”æœ‰å¤šç–‘æƒ³æ³•ã€‚å»ºè®®å¤šä¸ä»–äººæ²Ÿé€šã€åŸ¹å…»ä¿¡ä»»æ„Ÿã€å…³æ³¨ç§¯ææ–¹é¢',moderate:'å­˜åœ¨ä¸€å®šçŒœç–‘æˆ–åæ‰§æ€ç»´ã€‚å»ºè®®å¯»æ±‚å¿ƒç†å’¨è¯¢ã€å­¦ä¹ è´¨ç–‘è‡ªå·±æƒ³æ³•ã€å¢åŠ äº’åŠ¨',severe:'åæ‰§æ€ç»´è¾ƒä¸¥é‡ã€‚å»ºè®®ç«‹å³å¯»æ±‚ç²¾ç¥ç§‘åŒ»ç”Ÿå¸®åŠ©ã€å¯èƒ½éœ€è¦è¯ç‰©æ²»ç–—'},
            'ç²¾ç¥ç—…æ€§':{desc:'åæ˜ ç²¾ç¥åˆ†è£‚ç—‡ç›¸å…³ç—‡çŠ¶',normal:'æ€ç»´å’Œæ„ŸçŸ¥æ­£å¸¸',mild:'å¶å°”æœ‰å¥‡ç‰¹æƒ³æ³•ã€‚å»ºè®®ä¿æŒè§„å¾‹ä½œæ¯ã€å¦‚ç—‡çŠ¶æŒç»­è¯·å’¨è¯¢ä¸“ä¸šäººå£«',moderate:'å­˜åœ¨ä¸€äº›ç²¾ç¥ç—…æ€§ç—‡çŠ¶ã€‚å»ºè®®å°½å¿«å¯»æ±‚ç²¾ç¥ç§‘åŒ»ç”Ÿè¯„ä¼°ã€å¯èƒ½éœ€è¦è¯ç‰©æ²»ç–—',severe:'ç²¾ç¥ç—…æ€§ç—‡çŠ¶æ˜æ˜¾ã€‚å»ºè®®ç«‹å³å°±åŒ»ã€éœ€è¦ä¸“ä¸šç²¾ç¥ç§‘æ²»ç–—ã€å®¶äººåº”å¯†åˆ‡å…³æ³¨'}
        };

        // ç§»åŠ¨ç«¯çŠ¶æ€ç®¡ç†
        let currentMobileQuestion = 0;
        let mobileAnswers = new Array(questions.length).fill(null);
        let isMobileSubmitting = false;
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            renderDesktopQuestions();
            renderMobileQuestion();
            
            // æ£€æµ‹å±å¹•å°ºå¯¸å˜åŒ–
            window.addEventListener('resize', handleResize);
        });
        
        // å¤„ç†å±å¹•å°ºå¯¸å˜åŒ–
        function handleResize() {
            // å¦‚æœä»PCåˆ‡æ¢åˆ°ç§»åŠ¨ç«¯ï¼Œç¡®ä¿ç§»åŠ¨ç«¯çŠ¶æ€æ­£ç¡®
            if (window.innerWidth <= 768 && currentMobileQuestion === 0 && mobileAnswers.every(a => a === null)) {
                // ä»PCç«¯å¤åˆ¶ç­”æ¡ˆåˆ°ç§»åŠ¨ç«¯
                for (let i = 0; i < questions.length; i++) {
                    const selected = document.querySelector(`input[name="q${i}"]:checked`);
                    if (selected) {
                        mobileAnswers[i] = parseInt(selected.value);
                    }
                }
                updateMobileProgress();
            }
        }
        
        // æ¸²æŸ“PCç«¯é¢˜ç›®
        function renderDesktopQuestions() {
            const t = document.getElementById('desktopTestArea');
            let h = '';
            questions.forEach((q, i) => {
                h += `<div class="question"><div class="question-text"><span class="desktop-question-number">${i+1}</span>${q}</div><div class="desktop-options">`;
                for (let j = 1; j <= 5; j++) {
                    const l = ['æ²¡æœ‰','å¾ˆè½»','ä¸­ç­‰','åé‡','ä¸¥é‡'];
                    h += `<label class="desktop-option-label"><input type="radio" name="q${i}" value="${j}" ${mobileAnswers[i] === j ? 'checked' : ''}><span>${j}-${l[j-1]}</span></label>`;
                }
                h += `</div></div>`;
            });
            t.innerHTML = h;
        }
        
        // æ¸²æŸ“ç§»åŠ¨ç«¯å½“å‰é¢˜ç›®
        function renderMobileQuestion() {
            const container = document.getElementById('mobileQuestionContainer');
            const q = questions[currentMobileQuestion];
            const currentAnswer = mobileAnswers[currentMobileQuestion];
            
            let optionsHTML = '';
            for (let j = 1; j <= 5; j++) {
                const l = ['æ²¡æœ‰','å¾ˆè½»','ä¸­ç­‰','åé‡','ä¸¥é‡'];
                const isSelected = currentAnswer === j;
                optionsHTML += `
                    <div class="mobile-option ${isSelected ? 'selected' : ''}" data-value="${j}">
                        <input type="radio" name="mobileQ" value="${j}" ${isSelected ? 'checked' : ''}>
                        <span>${j} - ${l[j-1]}</span>
                    </div>
                `;
            }
            
            container.innerHTML = `
                <div class="question-header">
                    <div class="question-number">${currentMobileQuestion + 1}</div>
                    <div class="progress-text">${currentMobileQuestion + 1} / ${questions.length}</div>
                </div>
                <div class="question-text">${q}</div>
                <div class="mobile-options">
                    ${optionsHTML}
                </div>
            `;
            
            // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
            document.getElementById('prevBtn').disabled = currentMobileQuestion === 0;
            document.getElementById('nextBtn').textContent = 
                currentMobileQuestion === questions.length - 1 ? 'æäº¤' : 'ä¸‹ä¸€é¢˜';
            
            // æ›´æ–°è¿›åº¦æ¡
            updateMobileProgress();
            
            // æ·»åŠ é€‰é¡¹ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.mobile-option').forEach(option => {
                option.addEventListener('click', function() {
                    if (isMobileSubmitting) return; // é˜²æ­¢é‡å¤ç‚¹å‡»
                    
                    const value = parseInt(this.getAttribute('data-value'));
                    selectMobileOption(value);
                });
            });
        }
        
        // é€‰æ‹©ç§»åŠ¨ç«¯é€‰é¡¹
        function selectMobileOption(value) {
            isMobileSubmitting = true;
            
            // æ›´æ–°ç­”æ¡ˆ
            mobileAnswers[currentMobileQuestion] = value;
            
            // æ›´æ–°UI
            document.querySelectorAll('.mobile-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            document.querySelector(`.mobile-option[data-value="${value}"]`).classList.add('selected');
            
            // çŸ­æš‚å»¶è¿Ÿåè‡ªåŠ¨è·³è½¬
            setTimeout(() => {
                isMobileSubmitting = false;
                
                if (currentMobileQuestion < questions.length - 1) {
                    // è·³è½¬åˆ°ä¸‹ä¸€é¢˜
                    currentMobileQuestion++;
                    renderMobileQuestion();
                } else {
                    // æœ€åä¸€é¢˜ï¼Œå‡†å¤‡æäº¤
                    document.getElementById('nextBtn').focus();
                }
            }, 400);
        }
        
        // æ›´æ–°ç§»åŠ¨ç«¯è¿›åº¦æ¡
        function updateMobileProgress() {
            const answeredCount = mobileAnswers.filter(a => a !== null).length;
            const progress = (answeredCount / questions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }
        
        // ç§»åŠ¨ç«¯ä¸Šä¸€é¢˜
        document.getElementById('prevBtn').addEventListener('click', function() {
            if (currentMobileQuestion > 0) {
                currentMobileQuestion--;
                renderMobileQuestion();
            }
        });
        
        // ç§»åŠ¨ç«¯ä¸‹ä¸€é¢˜/æäº¤
        document.getElementById('nextBtn').addEventListener('click', function() {
            if (currentMobileQuestion < questions.length - 1) {
                // å¦‚æœå½“å‰é¢˜æœªç­”ï¼Œä¸å…è®¸å‰è¿›
                if (mobileAnswers[currentMobileQuestion] === null) {
                    alert('è¯·å…ˆé€‰æ‹©å½“å‰é¢˜ç›®çš„ç­”æ¡ˆ');
                    return;
                }
                
                currentMobileQuestion++;
                renderMobileQuestion();
            } else {
                // æäº¤æµ‹è¯•
                if (mobileAnswers.includes(null)) {
                    alert('è¯·å®Œæˆæ‰€æœ‰é¢˜ç›®åå†æäº¤');
                    return;
                }
                
                calculateResults(mobileAnswers);
            }
        });
        
        // PCç«¯è¡¨å•æäº¤
        document.getElementById('scl90Form').addEventListener('submit', function(e) {
            e.preventDefault();
            const f = new FormData(this), a = [];
            for (let i = 0; i < 90; i++) {
                const v = f.get(`q${i}`);
                if (!v) {
                    document.getElementById('errorMessage').classList.add('show');
                    setTimeout(() => document.getElementById('errorMessage').classList.remove('show'), 3000);
                    return;
                }
                a.push(parseInt(v));
            }
            calculateResults(a);
        });
        
        // ç»“æœè®¡ç®—å‡½æ•°
        function calculateResults(a) {
            const t = a.reduce((s, v) => s + v, 0),
                  av = (t / 90).toFixed(2),
                  pc = a.filter(v => v >= 2).length,
                  ps = a.filter(v => v >= 2).reduce((s, v) => s + v, 0),
                  pa = pc > 0 ? (ps / pc).toFixed(2) : 0;
            
            const fs = {}, fa = {};
            for (let [n, idx] of Object.entries(factors)) {
                const sum = idx.reduce((s, i) => s + a[i], 0);
                fs[n] = sum;
                fa[n] = (sum / idx.length).toFixed(2);
            }
            
            const results = {
                totalScore: t,
                avgScore: av,
                positiveCount: pc,
                positiveAvg: pa,
                factorScores: fs,
                factorAvgs: fa
            };
            
            // ä¿å­˜ç»“æœåˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('scl90_completed', 'true');
            localStorage.setItem('scl90_results', JSON.stringify(results));
            
            displayResults(results);
        }
        
        // æ˜¾ç¤ºç»“æœ
        function displayResults(r) {
            // éšè—æµ‹è¯•åŒºåŸŸ
            document.getElementById('scl90Form').style.display = 'none';
            document.getElementById('instruction').style.display = 'none';
            document.getElementById('mobileTestArea').style.display = 'none';
            
            // æ˜¾ç¤ºå®Œæˆé€šçŸ¥å’Œç»“æœ
            document.getElementById('completedNotice').style.display = 'block';
            const ra = document.getElementById('resultArea');
            ra.classList.add('show');
            
            // æ›´æ–°ç»“æœæ€»è§ˆ
            document.getElementById('summaryGrid').innerHTML = 
                `<div class="summary-item"><div class="label">æ€»åˆ†</div><div class="value">${r.totalScore}</div></div>
                 <div class="summary-item"><div class="label">æ€»å‡åˆ†</div><div class="value">${r.avgScore}</div></div>
                 <div class="summary-item"><div class="label">é˜³æ€§é¡¹ç›®æ•°</div><div class="value">${r.positiveCount}</div></div>
                 <div class="summary-item"><div class="label">é˜³æ€§ç—‡çŠ¶å‡åˆ†</div><div class="value">${r.positiveAvg}</div></div>`;
            
            // æ›´æ–°å› å­å¾—åˆ†è¡¨æ ¼
            let th = '';
            for (let [n, s] of Object.entries(r.factorScores)) {
                const av = r.factorAvgs[n];
                const l = getLevel(parseFloat(av));
                th += `<tr><td>${n}</td><td>${s}</td><td>${av}</td><td class="${l.class}">${l.text}</td></tr>`;
            }
            document.getElementById('factorTableBody').innerHTML = th;
            
            // ç»˜åˆ¶é›·è¾¾å›¾
            drawRadarChart(r.factorAvgs);
            
            // æ˜¾ç¤ºè§£è¯»å’Œå»ºè®®
            showInterpretation(r);
            showFactorAnalysis(r.factorAvgs);
            
            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            ra.scrollIntoView({ behavior: 'smooth' });
        }
        
        // è·å–ç­‰çº§
        function getLevel(v) {
            if (v < 2) return { text: 'æ­£å¸¸', class: 'level-normal' };
            else if (v < 3) return { text: 'è½»åº¦', class: 'level-mild' };
            else if (v < 4) return { text: 'ä¸­åº¦', class: 'level-moderate' };
            else return { text: 'é‡åº¦', class: 'level-severe' };
        }
        
        // ç»˜åˆ¶é›·è¾¾å›¾
        function drawRadarChart(fa) {
            const c = document.getElementById('radarChart');
            const ctx = c.getContext('2d');
            
            // æ ¹æ®å±å¹•å¤§å°è°ƒæ•´canvaså°ºå¯¸
            const size = Math.min(500, window.innerWidth * 0.8);
            c.width = size;
            c.height = size;
            
            const cx = c.width / 2;
            const cy = c.height / 2;
            const r = size / 2 - 40;
            
            ctx.clearRect(0, 0, c.width, c.height);
            const mf = Object.keys(fa);
            const as = (Math.PI * 2) / mf.length;
            
            // ç»˜åˆ¶ç½‘æ ¼
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            for (let l = 1; l <= 5; l++) {
                ctx.beginPath();
                const lr = (r / 5) * l;
                for (let i = 0; i <= mf.length; i++) {
                    const a = i * as - Math.PI / 2;
                    const x = cx + lr * Math.cos(a);
                    const y = cy + lr * Math.sin(a);
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
            }
            
            // ç»˜åˆ¶è½´çº¿
            ctx.strokeStyle = '#ccc';
            mf.forEach((f, i) => {
                const a = i * as - Math.PI / 2;
                const x = cx + r * Math.cos(a);
                const y = cy + r * Math.sin(a);
                ctx.beginPath();
                ctx.moveTo(cx, cy);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                // ç»˜åˆ¶å› å­æ ‡ç­¾
                ctx.fillStyle = '#8B7355';
                ctx.font = '500 14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                const lx = cx + (r + 30) * Math.cos(a);
                const ly = cy + (r + 30) * Math.sin(a);
                ctx.fillText(f, lx, ly);
            });
            
            // ç»˜åˆ¶æ•°æ®åŒºåŸŸ
            ctx.beginPath();
            ctx.strokeStyle = '#8B7355';
            ctx.fillStyle = 'rgba(139, 115, 85, 0.2)';
            ctx.lineWidth = 2;
            mf.forEach((f, i) => {
                const v = parseFloat(fa[f]);
                const vr = (r / 5) * v;
                const a = i * as - Math.PI / 2;
                const x = cx + vr * Math.cos(a);
                const y = cy + vr * Math.sin(a);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // ç»˜åˆ¶æ•°æ®ç‚¹
            ctx.fillStyle = '#8B7355';
            mf.forEach((f, i) => {
                const v = parseFloat(fa[f]);
                const vr = (r / 5) * v;
                const a = i * as - Math.PI / 2;
                const x = cx + vr * Math.cos(a);
                const y = cy + vr * Math.sin(a);
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
            });
        }
        
        // æ˜¾ç¤ºè§£è¯»
        function showInterpretation(r) {
            let h = '<p><strong>è¯„ä»·æ ‡å‡†ï¼š</strong></p><ul><li>æ€»åˆ†è¶…è¿‡160åˆ†ï¼Œæˆ–é˜³æ€§é¡¹ç›®æ•°è¶…è¿‡43é¡¹ï¼Œæˆ–ä»»ä¸€å› å­å‡åˆ†è¶…è¿‡2åˆ†ï¼Œè€ƒè™‘ç­›æŸ¥é˜³æ€§</li><li>å› å­å‡åˆ† &lt; 2ï¼šæ­£å¸¸</li><li>å› å­å‡åˆ† 2-3ï¼šè½»åº¦</li><li>å› å­å‡åˆ† 3-4ï¼šä¸­åº¦</li><li>å› å­å‡åˆ† â‰¥ 4ï¼šé‡åº¦</li></ul><p><strong>æ‚¨çš„æµ‹è¯•ç»“æœï¼š</strong></p>';
            if (r.totalScore > 160 || r.positiveCount > 43) {
                h += '<p style="color:#f44336;font-weight:500;">ç­›æŸ¥é˜³æ€§ï¼Œå»ºè®®å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢å¸®åŠ©ã€‚</p>';
            } else {
                h += '<p style="color:#28a745;font-weight:500;">æ•´ä½“åœ¨æ­£å¸¸èŒƒå›´å†…ã€‚</p>';
            }
            h += '<p style="margin-top:20px;color:#ff9800;"><strong>æé†’ï¼š</strong>æœ¬æµ‹è¯•ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½ä½œä¸ºè¯Šæ–­ä¾æ®ã€‚å¦‚æœ‰ä¸¥é‡å¿ƒç†é—®é¢˜ï¼Œè¯·åŠæ—¶å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢å¸ˆæˆ–ç²¾ç¥ç§‘åŒ»ç”Ÿçš„å¸®åŠ©ã€‚</p>';
            document.getElementById('interpretationText').innerHTML = h;
        }
        
        // æ˜¾ç¤ºå› å­åˆ†æ
        function showFactorAnalysis(fa) {
            let h = '';
            for (let [n, v] of Object.entries(fa)) {
                const info = factorInfo[n];
                const val = parseFloat(v);
                const lvl = getLevel(val);
                let advice = '', badge = '';
                if (val < 2) {
                    advice = info.normal;
                    badge = 'background:#28a745;color:white;';
                } else if (val < 3) {
                    advice = info.mild;
                    badge = 'background:#ffc107;color:white;';
                } else if (val < 4) {
                    advice = info.moderate;
                    badge = 'background:#ff9800;color:white;';
                } else {
                    advice = info.severe;
                    badge = 'background:#f44336;color:white;';
                }
                h += `<div class="factor-item"><h4>${n} <span class="score-badge" style="${badge}">${v}åˆ† - ${lvl.text}</span></h4><p><strong>å› å­è¯´æ˜ï¼š</strong>${info.desc}</p><p><strong>åˆ†æå»ºè®®ï¼š</strong>${advice}</p></div>`;
            }
            document.getElementById('factorAnalysisText').innerHTML = h;
        }
        
        // é‡ç½®æµ‹è¯•
        function resetTest() {
            localStorage.removeItem('scl90_completed');
            localStorage.removeItem('scl90_results');
            location.reload();
        }
    </script>
</body>
</html>
